<!doctype html>
<html lang="ru">
<head>
  {% load static %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Главная</title>

  <!-- был /templates/static/css/bg.css -->
  <link rel="stylesheet" href="{% static 'css/bg.css' %}">
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
</head>
<body>
  <!-- BG -->
  <div class="bg">
    <canvas class="matrix-layer" data-depth="0.04"></canvas>
    <canvas class="matrix-layer" data-depth="0.08"></canvas>
    <canvas class="matrix-layer" data-depth="0.14"></canvas>
    <div class="bg-overlay"></div>
  </div>

  <!-- HEADER -->
    <header class="site-header">
        <div class="wrap">
            <a class="brand" href="#overview"><span>WB</span> OPS</a>
                <nav class="main-nav">
                    <a href="#overview" class="nav-link is-active">Обзор</a>
                    <a href="#features" class="nav-link">Возможности</a>
                    <a href="#process" class="nav-link">Процессы</a>
                    <a href="#links" class="nav-link">Ссылки</a>
                </nav>
        <div class="user-slot">
<a href="{% url 'register' %}" class="btn-burst">
  <span></span><span></span><span></span><span></span><span></span>
  <span>Регистр</span>
</a>

<a href="{% url 'login' %}?next={{ request.path }}" class="btn-burst">
  <span></span><span></span><span></span><span></span><span></span>
  <span>Войти</span>
</a>
        </div>
    </div>
    </header>

    <!-- MAIN -->
    <main class="container home">
    <!-- Обзор -->
        <section id="overview" class="glass section hero">
          <h1>Внутренняя панель команды</h1>
          <p class="lead">
            Один интерфейс для упаковки, остатков, юнит-экономики и карточек WB. Минимум кликов — максимум прозрачности.
          </p>
          <ul class="trust">
            <li><i data-feather="command"></i> Быстрые операции без «магии»</li>
            <li><i data-feather="lock"></i> Данные остаются у нас</li>
            <li><i data-feather="activity"></i> Понятные метрики по SKU</li>
          </ul>
        </section>

    <!-- Возможности -->
    <section id="features" class="glass section">
        <h2>Возможности</h2>
        <div class="grid-4">
        <div class="feature">
          <div class="badge">ФФ</div>
          <h3><i data-feather="layers"></i> Сканер коробок</h3>
          <p>BOX-идентификаторы, статусы open→closed→shipped, печать ярлыков, Excel/CSV выгрузки.</p>
        </div>
        <div class="feature">
          <div class="badge">Аналитика</div>
          <h3><i data-feather="bar-chart-2"></i> Юнит-экономика</h3>
          <p>Комиссии WB, логистика, налоги и реклама. Точка окупаемости и прибыль по SKU.</p>
        </div>
        <div class="feature">
          <div class="badge">Закупки</div>
          <h3><i data-feather="truck"></i> Дозаказ по прогнозу</h3>
          <p>Учет цикла: закупка → логистика → 2 недели продаж → отчет → возврат денег.</p>
        </div>
        <div class="feature">
          <div class="badge">SEO</div>
          <h3><i data-feather="edit-3"></i> Карточки и инфографика</h3>
          <p>Нейминг, описания, инфографика под WB, пресеты по брендам.</p>
        </div>
        </div>
    </section>

    <!-- Процессы -->
    <section id="process" class="glass section">
      <h2>Процессы</h2>
      <ol class="steps">
        <li><span>1</span> Импорт остатков и продаж, актуализация комиссий/расходов</li>
        <li><span>2</span> Пакетная печать ярлыков и сборка BOX с валидацией ШК</li>
        <li><span>3</span> Отчеты по прибыли, оборачиваемости, рекомендациям дозаказа</li>
        <li><span>4</span> Подготовка карточек (SEO/медиа), план A/B и контроль CTR</li>
      </ol>
    </section>

    <!-- Ссылки -->
    <section id="links" class="glass section">
      <h2>Быстрые ссылки</h2>
      <div class="grid-3">
        <a class="quick card mini" href="/ff/boxes/"><i data-feather="package"></i> Упаковка / BOX</a>
        <a class="quick card mini" href="/analytics/"><i data-feather="trending-up"></i> Аналитика</a>
        <a class="quick card mini" href="/seo/"><i data-feather="type"></i> SEO / Карточки</a>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
  <div class="wrap">
    <div class="footer-left">
      <span>Создал с любовью</span>
      <span class="heart">❤️</span>
      <strong>A1zy</strong>
    </div>
    <div class="footer-links">
      <a href="https://t.me/NEN_A1zy" target="_blank" rel="noopener">
        <i data-feather="send"></i><span>Мой Telegram</span>
      </a>
      <a href="#overview"><i data-feather="arrow-up-circle"></i><span>Наверх</span></a>
    </div>
  </div>
</footer>

  <!-- был /templates/static/js/bg.js -->
  <script>
    (() => {
  const layers = Array.from(document.querySelectorAll('.matrix-layer'));
  const chars = 'アイウエオカキクケコｱｲｳｴｵ01{}[]<>+-*/=0123456789ABCDEF';
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));

  function rand(min, max){ return Math.random()*(max-min)+min; }
  function pick(s){ return s[ (Math.random()*s.length)|0 ]; }

  // Палитра: бирюзовый основной + редкие бледно-желтые вспышки
  const palette = {
    base: { r: 0, g: 230, b: 140 },   // ярко-зелёный с каплей синего
    flare: { r: 255, g: 247, b: 189 }  // бледно-жёлтые вспышки
  };

  function MatrixLayer(canvas){
    this.cv = canvas;
    this.ctx = canvas.getContext('2d');
    this.depth = parseFloat(canvas.dataset.depth || '0.08');
    this.columns = 0;
    this.fontSize = 18;
    this.drops = [];
    this.time = 0;
    this.resize();
  }

  MatrixLayer.prototype.resize = function(){
    const {cv, ctx} = this;
    const w = cv.clientWidth * dpr;
    const h = cv.clientHeight * dpr;
    if (cv.width !== w || cv.height !== h){
      cv.width = w; cv.height = h;
      ctx.setTransform(1,0,0,1,0,0);
      ctx.scale(dpr,dpr);
    }
    this.fontSize = Math.max(14, Math.round(Math.min(window.innerWidth, window.innerHeight)/50));
    this.ctx.font = `${this.fontSize}px ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace`;
    this.columns = Math.ceil(cv.clientWidth / this.fontSize);
    this.drops = Array.from({length:this.columns}, () => rand(-40, 0));
  };

  MatrixLayer.prototype.step = function(dt){
    const {cv, ctx, fontSize, columns, drops, depth} = this;
    this.time += dt;

    // Лёгкое затухание следа
    ctx.fillStyle = `rgba(0,0,0,0.08)`;
    ctx.fillRect(0,0,cv.clientWidth,cv.clientHeight);

    for (let i=0; i<columns; i++){
      const x = i*fontSize + 2;
      const y = (drops[i]*fontSize);

      // Цвет символа: в 4-6% случаев — бледно-жёлтый «всплеск»
      const flareChance = Math.random() < 0.055;
      const flicker = 0.85 + Math.sin((this.time*2 + i)*0.7)*0.15; // лёгкое мерцание
      const c = flareChance
        ? palette.flare
        : palette.base;

      // Градиент яркости в хвосте
      const brightness = 0.75 + Math.random()*0.25;
      const r = Math.min(255, c.r * brightness * flicker);
      const g = Math.min(255, c.g * brightness * flicker);
      const b = Math.min(255, c.b * brightness * flicker);
      ctx.fillStyle = `rgba(${r|0},${g|0},${b|0},0.95)`;

      const ch = pick(chars);
      ctx.fillText(ch, x, y);

      // Переход символа вниз; рандомный «сброс»
      if (y > cv.clientHeight && Math.random() > 0.975){
        drops[i] = rand(-20, -2);
      } else {
        // Скорость фиксированная, без параллакса
        drops[i] += 0.35;
      }
    }
  };

  const instances = layers.map(c => new MatrixLayer(c));

  // Оптимизированный resize: только при изменении окна
  window.addEventListener('resize', () => instances.forEach(i => i.resize()));
  window.addEventListener('orientationchange', () => instances.forEach(i => i.resize()));

  // RAF
  let last = performance.now();
  function loop(now){
    const dt = Math.min(0.05, (now - last)/1000);
    last = now;
    instances.forEach(i => i.step(dt));
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

// Обновление активной ссылки при скролле
document.addEventListener("DOMContentLoaded", () => {
  const sections = document.querySelectorAll("main .section, main .hero");
  const navLinks = document.querySelectorAll(".main-nav .nav-link");

  let activeId = null;
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if(entry.isIntersecting){
        const id = entry.target.getAttribute("id");
        if(id) activeId = id;
      }
    });
    if(activeId){
      navLinks.forEach(link => link.classList.remove("is-active"));
      const activeLink = document.querySelector(`.main-nav a[href="#${activeId}"]`);
      if(activeLink){ activeLink.classList.add("is-active"); }
    }
  }, {
    threshold: 0.7   // секция считается видимой, если хотя бы 70% в viewport
  });

  sections.forEach(section => observer.observe(section));
});
  </script>
</body>
</html>
